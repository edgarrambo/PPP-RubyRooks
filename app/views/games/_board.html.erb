<% 8.times do |y| %>   <div class="row justify-content-center">    <% 8.times do |x| %>      <% piece = get_piece(x, y, the_game) %>                <div id="<%= x %>,<%= y %>" class="<%= black_tile?(x,y) ? "black tile" : "white tile" %>">          <% if piece.present? %>            <%= link_to piece_path(piece) do %>                      <%= image_tag piece.piece_number.to_s + ".png", class: "piece" %>            <% end %>          <% end %>        </div>    <% end %>  </div><% end %><script>  $(function() {    $('.piece').draggable({      classes: {        "ui-draggable": "highlight"      },      snap: '.tile'    });    $( '.tile').droppable({            drop: function( event, ui ) {        $.ajax({          type: 'PATCH',          url: ui.draggable.data('update-url'),          dataType: 'json',          data: {piece: {x_position: x, y_position: y}}                });            },    });  });  </script>